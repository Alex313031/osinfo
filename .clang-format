# Base on Chromium's C++ style, could change to LLVM
BasedOnStyle: Chromium

# Only for C++
Language: Cpp

# Global line length limit
ColumnLimit: 100

# General indent width
IndentWidth: 2

# Don't allow more than 1 empty line
MaxEmptyLinesToKeep: 1

# 1 space before trailing comments
SpacesBeforeTrailingComments: 1

# Align multiple trailing comments for readability
AlignTrailingComments: true

# Leave comments alone, some are longer than 80 lines
ReflowComments: false

# Use C++ 11
Standard: Cpp11

# Braces for everything
InsertBraces: true

# Always insert newline
InsertNewlineAtEOF: true

# Don't use compact namespaces like Chromium
CompactNamespaces: false

# Modern braced lists
Cpp11BracedListStyle: true

# std::string* str
PointerAlignment: Left

# No C style spaces cluttering things
SpacesInParentheses: false

# Arrays don't have padding spaces
SpacesInSquareBrackets: false

# Always indent namespaces
NamespaceIndentation: All

# No spaces between C casts
SpaceAfterCStyleCast: false

# Allow Macros to be spaced how we like
AlignConsecutiveMacros: false

# Should never use tab chars
UseTab: Never

# Sort #includes by following
# https://google.github.io/styleguide/cppguide.html#Names_and_Order_of_Includes
# ref: https://clang.llvm.org/docs/ClangFormatStyleOptions.html#includeblocks
SortIncludes: true
IncludeBlocks: Regroup

# ref: https://clang.llvm.org/docs/ClangFormatStyleOptions.html#includecategories
IncludeCategories:
  # The win32 api has all sorts of implicit include order dependencies :-/
  # Give a few headers special priorities that make sure they appear before
  # all other headers.
  # Sync this with SerializeIncludes in tools/add_header.py.
  # TODO(crbug.com/329138753): remove include sorting from tools/add_header.py
  # after confirming clang-format sort works well.
  # LINT.IfChange(winheader)
  - Regex:           '^<objbase\.h>' # This has to be before initguid.h.
    Priority:        1
  - Regex:           '^<(atlbase|initguid|mmdeviceapi|ocidl|ole2|shobjidl|tchar|unknwn|windows|winsock2|winternl|ws2tcpip)\.h>'
    Priority:        2
  # Other C system headers.
  - Regex:           '^<.*\.h>'
    Priority:        3
  # C++ standard library headers.
  - Regex:           '^<.*>'
    Priority:        4
  # Other libraries.
  - Regex:           '.*'
    Priority:        5
# ref: https://clang.llvm.org/docs/ClangFormatStyleOptions.html#includeismainregex
IncludeIsMainRegex: "\
(_(32|64|android|apple|chromeos|freebsd|fuchsia|fuzzer|ios|linux|mac|openbsd|posix|stubs?|win))?\
(_(unit|browser|perf)?tests?)?$"
